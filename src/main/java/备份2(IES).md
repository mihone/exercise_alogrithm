背景
为了提升跟团游产品质量，形成建品-行中反馈-产品优化的闭环，需要收集客人实际出行过程中的真实体验来为
供应商产品优化赋能。所以业务目标就是建立一个即时反馈体系，旨在更准确真实地收集客人的体验。


拆解需求
这是一个模糊的需求，通过分析和拆解，我们需要建设一个反馈系统，可以获取当日行程的反馈问题，
可以允许用户提交反馈，反馈问题分为两类，提问式反馈和开放式反馈。
其中项目的关键点和难点有三个
1、是反馈如何存储
    结构化信息存mysql，非结构化存hbase
2、如何应对高并发流量的查询。反馈流量由两部分，一部分是反馈问卷的下发，
另一部分是反馈结果的查询
反馈问卷是完全基于订单中的资源定制的，会有较重查询。会导致相应慢。
那么为了避免说大流量下这种重查询影响服务器性能，我们对可反馈资源信息进行缓存，什么时候缓存呢，在出行当天
进行预热缓存。（缓存多久呢？7天，7天后一般用户就不会再去查看以及反馈了）。
反馈结果查询则采用redis的短时缓存。这里面还有个问题，在更新的过程中，缓存失效了，
来了个查询，由于主从延迟的影响 ，刚好把旧数据更新进去了。解决办法加个1s的锁

这里面还有个问题，如果
同时为了避免缓存雪崩，每个反馈结果的过期时间在一定范围内随机生成

redis缓存，   
当天行程提前预热缓存，
3、如何保证实时更新反馈问题。反馈问题失效怎么办？
本地缓存，定时拉取最新反馈问题配置。

如何存储？
数据量有多大？-》有亿级别
峰值qps两三千
数据几千万 



为了避免完全开放式问题降低用户反馈意愿，采取了半开放式，提问式反馈的形式。
并通过在m端搭建配置系统，实现了反馈问题的修改即时生效以及动态化配置的能力。
在反馈问题读写上，采用冷热数据分离的思路，离行程最近的反馈信息从redis读取，时间间隔久的数据则从db读取。
来在节省内存的前提下，应对大流量的访问。
反馈分为提问式和开放式。


hbase 很适合存储非结构化的数据。
反馈问题中有大文本开放问题，存储mysql占空间-》用hbase

